--
-- PostgreSQL database dump
--

-- Dumped from database version 9.5.9
-- Dumped by pg_dump version 9.5.9

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: notouristoffice; Type: COMMENT; Schema: -; Owner: postgres
--

COMMENT ON DATABASE notouristoffice IS 'OpenData Hackdays Project development DB';


--
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: Event; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "Event" (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    start_date timestamp with time zone NOT NULL,
    end_date timestamp with time zone NOT NULL,
    parent_event_id bigint,
    description character varying(1000),
    provider_id bigint NOT NULL,
    venue character varying(50),
    location_id bigint
);


ALTER TABLE "Event" OWNER TO postgres;

--
-- Name: Event_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "Event_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "Event_id_seq" OWNER TO postgres;

--
-- Name: Event_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "Event_id_seq" OWNED BY "Event".id;


--
-- Name: GuestConstraint; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "GuestConstraint" (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    offerconstraint_type_id integer NOT NULL
);


ALTER TABLE "GuestConstraint" OWNER TO postgres;

--
-- Name: X_GuestConstraintCategory; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "X_GuestConstraintCategory" (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    parent_category_id integer
);


ALTER TABLE "X_GuestConstraintCategory" OWNER TO postgres;

--
-- Name: GuestConstraintCategory_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "GuestConstraintCategory_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "GuestConstraintCategory_id_seq" OWNER TO postgres;

--
-- Name: GuestConstraintCategory_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "GuestConstraintCategory_id_seq" OWNED BY "X_GuestConstraintCategory".id;


--
-- Name: GuestContraint_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "GuestContraint_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "GuestContraint_id_seq" OWNER TO postgres;

--
-- Name: GuestContraint_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "GuestContraint_id_seq" OWNED BY "GuestConstraint".id;


--
-- Name: GuestPreferences; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "GuestPreferences" (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    offercategory_id bigint NOT NULL
);


ALTER TABLE "GuestPreferences" OWNER TO postgres;

--
-- Name: GuestInterest_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "GuestInterest_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "GuestInterest_id_seq" OWNER TO postgres;

--
-- Name: GuestInterest_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "GuestInterest_id_seq" OWNED BY "GuestPreferences".id;


--
-- Name: Location; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "Location" (
    id bigint NOT NULL,
    guid character varying(15),
    name character varying(50)
);


ALTER TABLE "Location" OWNER TO postgres;

--
-- Name: Location_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "Location_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "Location_id_seq" OWNER TO postgres;

--
-- Name: Location_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "Location_id_seq" OWNED BY "Location".id;


--
-- Name: Offer; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "Offer" (
    id bigint NOT NULL,
    name character varying(150),
    description character varying(1024),
    provider_id bigint NOT NULL,
    url character varying(1024),
    location_id bigint,
    start_date timestamp with time zone,
    end_date timestamp with time zone,
    offercategory_id bigint NOT NULL
);


ALTER TABLE "Offer" OWNER TO postgres;

--
-- Name: OfferCategory; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "OfferCategory" (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description character varying(255),
    parent_category bigint
);


ALTER TABLE "OfferCategory" OWNER TO postgres;

--
-- Name: OfferCategory_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "OfferCategory_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "OfferCategory_id_seq" OWNER TO postgres;

--
-- Name: OfferCategory_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "OfferCategory_id_seq" OWNED BY "OfferCategory".id;


--
-- Name: OfferConstraint; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "OfferConstraint" (
    id bigint NOT NULL,
    offerconstrainttype_id bigint NOT NULL,
    offer_id bigint NOT NULL
);


ALTER TABLE "OfferConstraint" OWNER TO postgres;

--
-- Name: OfferConstraintType; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "OfferConstraintType" (
    id integer NOT NULL,
    name character varying NOT NULL
);


ALTER TABLE "OfferConstraintType" OWNER TO postgres;

--
-- Name: OfferConstraintType_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "OfferConstraintType_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "OfferConstraintType_id_seq" OWNER TO postgres;

--
-- Name: OfferConstraintType_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "OfferConstraintType_id_seq" OWNED BY "OfferConstraintType".id;


--
-- Name: OfferConstraint_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "OfferConstraint_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "OfferConstraint_id_seq" OWNER TO postgres;

--
-- Name: OfferConstraint_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "OfferConstraint_id_seq" OWNED BY "OfferConstraint".id;


--
-- Name: Offer_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "Offer_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "Offer_id_seq" OWNER TO postgres;

--
-- Name: Offer_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "Offer_id_seq" OWNED BY "Offer".id;


--
-- Name: Provider; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "Provider" (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    street character varying(100),
    zip character varying(10),
    town character varying(50),
    country_code character varying(3)
);


ALTER TABLE "Provider" OWNER TO postgres;

--
-- Name: Provider_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "Provider_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "Provider_id_seq" OWNER TO postgres;

--
-- Name: Provider_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "Provider_id_seq" OWNED BY "Provider".id;


--
-- Name: User; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "User" (
    id bigint NOT NULL,
    lastname character varying(100) NOT NULL,
    firstname character varying(100) NOT NULL,
    email character varying(255) NOT NULL,
    password_hash character varying(1024)
);


ALTER TABLE "User" OWNER TO postgres;

--
-- Name: UserRole; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "UserRole" (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description character varying(500) NOT NULL
);


ALTER TABLE "UserRole" OWNER TO postgres;

--
-- Name: UserRoleMap; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE "UserRoleMap" (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    userrole_id integer NOT NULL
);


ALTER TABLE "UserRoleMap" OWNER TO postgres;

--
-- Name: UserRoleMap_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "UserRoleMap_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "UserRoleMap_id_seq" OWNER TO postgres;

--
-- Name: UserRoleMap_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "UserRoleMap_id_seq" OWNED BY "UserRoleMap".id;


--
-- Name: UserRole_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "UserRole_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "UserRole_id_seq" OWNER TO postgres;

--
-- Name: UserRole_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "UserRole_id_seq" OWNED BY "UserRole".id;


--
-- Name: User_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE "User_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "User_id_seq" OWNER TO postgres;

--
-- Name: User_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE "User_id_seq" OWNED BY "User".id;


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Event" ALTER COLUMN id SET DEFAULT nextval('"Event_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "GuestConstraint" ALTER COLUMN id SET DEFAULT nextval('"GuestContraint_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "GuestPreferences" ALTER COLUMN id SET DEFAULT nextval('"GuestInterest_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Location" ALTER COLUMN id SET DEFAULT nextval('"Location_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Offer" ALTER COLUMN id SET DEFAULT nextval('"Offer_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "OfferCategory" ALTER COLUMN id SET DEFAULT nextval('"OfferCategory_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "OfferConstraint" ALTER COLUMN id SET DEFAULT nextval('"OfferConstraint_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "OfferConstraintType" ALTER COLUMN id SET DEFAULT nextval('"OfferConstraintType_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Provider" ALTER COLUMN id SET DEFAULT nextval('"Provider_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "User" ALTER COLUMN id SET DEFAULT nextval('"User_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "UserRole" ALTER COLUMN id SET DEFAULT nextval('"UserRole_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "UserRoleMap" ALTER COLUMN id SET DEFAULT nextval('"UserRoleMap_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "X_GuestConstraintCategory" ALTER COLUMN id SET DEFAULT nextval('"GuestConstraintCategory_id_seq"'::regclass);


--
-- Data for Name: Event; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "Event" (id, name, start_date, end_date, parent_event_id, description, provider_id, venue, location_id) FROM stdin;



--
-- Name: Event_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"Event_id_seq"', 1, false);


--
-- Data for Name: GuestConstraint; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "GuestConstraint" (id, user_id, offerconstraint_type_id) FROM stdin;



--
-- Name: GuestConstraintCategory_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"GuestConstraintCategory_id_seq"', 1, false);


--
-- Name: GuestContraint_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"GuestContraint_id_seq"', 1, false);


--
-- Name: GuestInterest_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"GuestInterest_id_seq"', 1, false);


--
-- Data for Name: GuestPreferences; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "GuestPreferences" (id, user_id, offercategory_id) FROM stdin;



--
-- Data for Name: Location; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "Location" (id, guid, name) FROM stdin;



--
-- Name: Location_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"Location_id_seq"', 1, false);


--
-- Data for Name: Offer; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "Offer" (id, name, description, provider_id, url, location_id, start_date, end_date, offercategory_id) FROM stdin;
2	Doppelzimmer	\N	1	\N	\N	\N	\N	1
1	Einzelzimmer	\N	1	\N	\N	\N	\N	1
3	Restaurant	\N	1	\N	\N	\N	\N	2
4	Zimmer mit Etagendusche	\N	2	\N	\N	\N	\N	1
5	Zimmer mit Dusche / WC	\N	2	\N	\N	\N	\N	1
6	Daueraustellung Arosa	\N	3	\N	\N	\N	\N	5
7	Sonderaustellung Lebenswende in Arosa	\N	3	\N	\N	\N	\N	5



--
-- Data for Name: OfferCategory; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "OfferCategory" (id, name, description, parent_category) FROM stdin;
1	Unterkunft	Any type of accomodation	\N
4	Transport	\N	\N
3	Aktivitäten	\N	\N
6	Beauty	\N	\N
5	Kultur	\N	\N
8	Eislauf	\N	7
7	Sport	\N	3
10	Snowboard	\N	7
9	Ski Alpin	\N	7
12	Wandern	\N	7
11	Eishockey	\N	7
13	Biken	\N	7
14	Regionale Highlights	\N	\N
15	geführtes Bergsteigen	\N	7
16	Hotels	\N	1
17	Jugendherbergen	\N	1
20	Bed and Breakfast	\N	1
19	Campingplätze	\N	1
18	Ferienwohnungen	\N	1
21	Interhome Ferienwohnungen	\N	18
22	REKA Ferienwohnungen	\N	18
2	Gastronomie	\N	\N
25	Bar	\N	2
26	Diskothek	\N	2
23	Restaurants	\N	2
24	Cafés	\N	2
27	Museum	\N	5
28	Skiunterricht	\N	9



--
-- Name: OfferCategory_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"OfferCategory_id_seq"', 1, false);


--
-- Data for Name: OfferConstraint; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "OfferConstraint" (id, offerconstrainttype_id, offer_id) FROM stdin;
1	1	3



--
-- Data for Name: OfferConstraintType; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "OfferConstraintType" (id, name) FROM stdin;
2	Hindernisfrei
3	Familienfreundlich
1	Verpflegung - Vegan
4	Verpflegung - Vegetarisch
5	Verpflegung - Koscher



--
-- Name: OfferConstraintType_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"OfferConstraintType_id_seq"', 1, false);


--
-- Name: OfferConstraint_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"OfferConstraint_id_seq"', 1, false);


--
-- Name: Offer_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"Offer_id_seq"', 1, false);


--
-- Data for Name: Provider; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "Provider" (id, name, street, zip, town, country_code) FROM stdin;
1	Sunstar Alpine Hotel	\N	7050	Arosa	CHE
2	Mountain Lodge	\N	7050	Arosa	CHE
3	Heimatmuseum	\N	7050	Arosa	CHE



--
-- Name: Provider_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"Provider_id_seq"', 1, false);


--
-- Data for Name: User; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "User" (id, lastname, firstname, email, password_hash) FROM stdin;
1	Hasler	Harry	harry@test.com	123
2	Systemadministrator	admin	test@test.com	1234



--
-- Data for Name: UserRole; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "UserRole" (id, name, description) FROM stdin;
2	administrator	System Administrator
1	guest	Any Guest
3	trourist_office_agent	Tourist Office Agent



--
-- Data for Name: UserRoleMap; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "UserRoleMap" (id, user_id, userrole_id) FROM stdin;
1	1	1



--
-- Name: UserRoleMap_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"UserRoleMap_id_seq"', 1, false);


--
-- Name: UserRole_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"UserRole_id_seq"', 1, false);


--
-- Name: User_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"User_id_seq"', 1, false);


--
-- Data for Name: X_GuestConstraintCategory; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "X_GuestConstraintCategory" (id, name, parent_category_id) FROM stdin;



--
-- Name: Event_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Event"
    ADD CONSTRAINT "Event_pkey" PRIMARY KEY (id);


--
-- Name: GuestConstraintCategory_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "X_GuestConstraintCategory"
    ADD CONSTRAINT "GuestConstraintCategory_pkey" PRIMARY KEY (id);


--
-- Name: GuestContraint_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "GuestConstraint"
    ADD CONSTRAINT "GuestContraint_pkey" PRIMARY KEY (id);


--
-- Name: GuestPreferences_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "GuestPreferences"
    ADD CONSTRAINT "GuestPreferences_pkey" PRIMARY KEY (id);


--
-- Name: Location_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Location"
    ADD CONSTRAINT "Location_pkey" PRIMARY KEY (id);


--
-- Name: OfferCategory_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "OfferCategory"
    ADD CONSTRAINT "OfferCategory_pkey" PRIMARY KEY (id);


--
-- Name: OfferConstraintType_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "OfferConstraintType"
    ADD CONSTRAINT "OfferConstraintType_pkey" PRIMARY KEY (id);


--
-- Name: OfferConstraint_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "OfferConstraint"
    ADD CONSTRAINT "OfferConstraint_pkey" PRIMARY KEY (id);


--
-- Name: Offer_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Offer"
    ADD CONSTRAINT "Offer_pkey" PRIMARY KEY (id);


--
-- Name: Provider_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Provider"
    ADD CONSTRAINT "Provider_pkey" PRIMARY KEY (id);


--
-- Name: UserRoleMap_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "UserRoleMap"
    ADD CONSTRAINT "UserRoleMap_pkey" PRIMARY KEY (id);


--
-- Name: UserRole_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "UserRole"
    ADD CONSTRAINT "UserRole_pkey" PRIMARY KEY (id);


--
-- Name: User_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "User"
    ADD CONSTRAINT "User_pkey" PRIMARY KEY (id);


--
-- Name: event_name_start_date_provider_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Event"
    ADD CONSTRAINT event_name_start_date_provider_id_key UNIQUE (parent_event_id, start_date, name);


--
-- Name: guestconstraint_user_id_offerconstraint_type_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "GuestConstraint"
    ADD CONSTRAINT guestconstraint_user_id_offerconstraint_type_id_key UNIQUE (user_id, offerconstraint_type_id);


--
-- Name: guestpreferences_user_id_offercategory_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "GuestPreferences"
    ADD CONSTRAINT guestpreferences_user_id_offercategory_id_key UNIQUE (user_id, offercategory_id);


--
-- Name: offer_name_provider_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Offer"
    ADD CONSTRAINT offer_name_provider_id_key UNIQUE (provider_id, name);


--
-- Name: offercategory_name_parentcategory_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "OfferCategory"
    ADD CONSTRAINT offercategory_name_parentcategory_key UNIQUE (name, parent_category);


--
-- Name: offerconstraint_offerconstrainttype_id_offer_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "OfferConstraint"
    ADD CONSTRAINT offerconstraint_offerconstrainttype_id_offer_id_key UNIQUE (offerconstrainttype_id, offer_id);


--
-- Name: provider_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "Provider"
    ADD CONSTRAINT provider_name_key UNIQUE (name);


--
-- Name: user_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "User"
    ADD CONSTRAINT user_email_key UNIQUE (email);


--
-- Name: userrole_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "UserRole"
    ADD CONSTRAINT userrole_name_key UNIQUE (name);


--
-- Name: userrolemap_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "UserRoleMap"
    ADD CONSTRAINT userrolemap_key UNIQUE (user_id, userrole_id);


--
-- Name: userrolemap_user_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "UserRoleMap"
    ADD CONSTRAINT userrolemap_user_fkey FOREIGN KEY (user_id) REFERENCES "User"(id);


--
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- Name: UserRoleMap; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE "UserRoleMap" FROM PUBLIC;
REVOKE ALL ON TABLE "UserRoleMap" FROM postgres;
GRANT ALL ON TABLE "UserRoleMap" TO postgres;
GRANT ALL ON TABLE "UserRoleMap" TO stefan WITH GRANT OPTION;


--
-- PostgreSQL database dump complete
--

